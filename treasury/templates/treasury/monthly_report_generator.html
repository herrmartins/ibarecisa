{% extends 'core/base.html' %}
{% load static %}
{% block content %}
<script src="{% static 'js/validate_report.js' %}" defer></script>
<style>
  .stat-card { transition: transform .2s ease, box-shadow .2s ease; border-radius: 16px; }
  .stat-card:hover { transform: translateY(-3px); box-shadow: 0 12px 24px rgba(0,0,0,.12); }
</style>
<div class="container py-3">
  <div class="text-center mb-3">
    <p class="fs-5 fw-light">{{church_info.name}} - {{church_info.CNPJ}}</p>
    <p class="fs-3 fw-light">Gerar relatório analítico de {{month_in_text}} de {{year}}</p>
  </div>
  <div class="row g-3 justify-content-center">
    <div class="col-12 col-md-5">
      <div class="card stat-card h-100">
        <div class="card-body">
          <h5 class="card-title fw-light">Dados do relatório</h5>
          <form action="{% url 'treasury:create-monthly-report' %}" method="POST">
            {% csrf_token %}
            {{form.as_p}}
            <button type="submit" class="btn btn-primary" id="submitBtn">Gerar</button>
          </form>
        </div>
      </div>
    </div>
    <div class="col-12 col-md-7">
      <div class="card stat-card h-100">
        <div class="card-body">
          <div class="mb-2"><strong>Observação:</strong> A data do relatório é sempre o último dia do mês correspondente às transações nele contidas.</div>
          <div class="row">
            <div class="col-12 col-lg-6">
              <p class="fw-normal">Transações Positivas</p>
              {% for key, value in p_transactions.items %}
                <p class="fw-light">{{ key }} - R$ {{ value }}</p>
              {% endfor %}
              <p class="fw-bold text-success">Total: {{total_ptransactions}}</p>
            </div>
            <div class="col-12 col-lg-6">
              <p class="fw-normal">Transações Negativas</p>
              {% for key, value in n_transactions.items %}
                <p class="fw-light">{{ key }} - R$ {{ value }}</p>
              {% endfor %}
              <p class="fw-bold text-danger">Total: {{total_ntransactions}}</p>
              <p>Resultado do mês: R$ {{monthly_result}}</p>
            </div>
          </div>
          <div class="mt-2">
            <p>Você pode deixar esses campos em branco, mas caso preencha, é preciso que a soma do valor desses campos seja igual ao do saldo final.</p>
            <div class="fw-bold text-danger" id="field_status"></div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}